<header class="page-header">
    <h1>{{ page.title }}</h1>
</header>

{% comment %}
  Regular page content goes here.
{% endcomment %}

<div class="rte sitemap">

  {% comment %}
  Comment out page.content because it's not needed or wanted on sitemap
  {{ page.content }}
  {% endcomment %}
  
  <div class="categories">
  <h2>By Category</h2>
  {% for category in linklists.main-menu.links %}
  	<div class="category col-xs-12  col-sm-4 col-md-4 col-lg-1">
	  <h4><a href="{{ category.url }}">{{ category.title }}</a></h4>
        <ul>
			{% for subcategory in category.links %}
    	  	<li><a href="{{ subcategory.url }}">{{ subcategory.title }}</a></li>
  		{% endfor %}<br><br>
      </ul>
  	</div>
  {% endfor %}
	</div>
	
  {% comment %}
    In the next section, we need to list out all the brands available for each category.
    - iterate over the 1st level of the linklist to get the category
    - get all the products in that linklist
    - look for tags with the word "Brand" in it and extract the brand name which is beside it
    - if it hasn't been listed, list it
	{% endcomment %}

  
	<div class="brands">
	<h2>By Brand</h2>
  {% for category in linklists.main-menu.links %}
    <div class="category">
			<h4><a href="{{ category.url }}">{{ category.title }}</a></h4>
    		{% for subcategory in category.links %}
			      {% assign brandCount = 0 %}
   				  {% assign collectionHandle = {{subcategory.object.handle }} %}
    				{% comment %}<p>This is the collection handle: {{ collectionHandle }}</p>{% endcomment %}
    				{% for product in subcategory.object.products %}
    				  {% comment %}
	    				<p>This is the product name: {{ product.title }}</p>
	    				<p>This is the product's tags: {{ product.tags }}</p>
	    				{% endcomment %}
	    				{% for tag in product.tags %}
	    				  {% if tag contains "Brand." or tag contains "Brand " %}
    				      {% assign brandCount = brandCount | plus: 1 %}
    				      {% if brandCount == 1 %}
		    				    <span><a href="{{ category.url }}?constraint={{ tag | handle | remove: "brand-" }}">{{ tag | remove: "Brand " | remove: "Brand." }}</a>, </span>
		    				  {% endif %}
	    				  {% endif %}
	    				{% endfor %}
    				{% endfor %}
    		{% endfor %}
    </div>
  {% endfor %}
	</div>  

  
</div>


































